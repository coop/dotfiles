# xdg
source "${FRESH_LOCAL}/shell/config/xdg.sh"

# fresh
fresh "freshshell/fresh" "bin/fresh" --bin

# install directories
asdf_install_dir="${XDG_DATA_HOME}/asdf"

# bash
for file in "${HOME}/.bash_profile" "${HOME}/.bashrc"; do
  fresh-options --file=$file --marker="#"
    fresh "shell/config/bashrc.sh"
    fresh "shell/config/xdg.sh"
    fresh "shell/functions/*.sh"
    fresh "shell/config/path.sh"
    fresh "shell/config/prompt.sh"
    fresh "shell/config/less.sh"
    fresh "shell/config/history.sh"
    fresh "shell/config/case-insensitive-globbing.sh"
    fresh "shell/config/symlink.sh"
    fresh chriskempson/base16-shell scripts/base16-tomorrow-night.sh
    fresh "shell/config/fresh.sh"
    fresh "shell/config/editor.sh"
    fresh "shell/config/vim.sh"
    fresh "shell/config/asdf.sh" --filter="sed s,INSTALL_DIR,$asdf_install_dir,"
    fresh "shell/config/clipboard.sh"
    fresh "shell/config/direnv.sh"
    fresh "shell/config/coreutils.sh"
    fresh "shell/config/plain.sh"
    fresh "shell/config/pssh.sh"
  fresh-options
done

# scripts
fresh "bin/*" --bin

# asdf
$FRESH_LOCAL/asdf/install.sh "${asdf_install_dir}"

fresh-options --file="${HOME}/.asdfrc"
  fresh "shell/asdf/legacy-version-file"
fresh-options

# vim
$FRESH_LOCAL/vim/create-xdg-directories.sh

fresh-options --file="${XDG_CONFIG_HOME}/vim/vimrc" --marker="\""
  fresh "vim/required.vim"
  fresh "vim/xdg.vim"
  fresh "vim/vim-plug/before.vim"
  fresh "vim/plugins/*.vim"
  fresh "vim/vim-plug/after.vim"
  fresh "vim/global.vim"
  fresh "vim/config/*.vim"
  fresh "jasoncodes/dotfiles" "vim/config/fast_escape.vim"
  fresh "vim/mappings.vim"
  fresh "jasoncodes/dotfiles" "vim/mappings/disable-cursor-keys.vim"
fresh-options

# git
$FRESH_LOCAL/git/create-xdg-directories.sh
$FRESH_LOCAL/git/create-local-config.sh

fresh-options --file="${XDG_CONFIG_HOME}/git/config" --marker="#"
  fresh "git/config"
  fresh "git/include" --filter="sed s,XDG_CONFIG_HOME,$XDG_CONFIG_HOME,"
  fresh "git/alias"
  fresh "git/aliases/*"
fresh-options

fresh-options --file="${XDG_CONFIG_HOME}/git/ignore" --marker="#"
  fresh "github/gitignore" "Global/macOS.gitignore"
  fresh "github/gitignore" "Global/Tags.gitignore"
  fresh "github/gitignore" "Global/Vim.gitignore"
  fresh "github/gitignore" "Ruby.gitignore"
  fresh "github/gitignore" "Node.gitignore"
fresh-options

# alacritty
fresh-options --file="${XDG_CONFIG_HOME}/alacritty/alacritty.yml" --marker="#"
  fresh "alacritty/env.yml"
  fresh "alacritty/dimensions.yml"
  fresh "alacritty/dpi.yml"
  fresh "alacritty/tabspaces.yml"
  fresh "alacritty/fonts.yml"
  fresh "alacritty/render-timer.yml"
  fresh "alacritty/cursor.yml"
  fresh "alacritty/colors.yml"
  fresh "alacritty/visual-bell.yml"
  fresh "alacritty/key-bindings.yml"
  fresh "alacritty/mouse.yml"
  fresh "alacritty/shell.yml"
fresh-options

fresh-options --bin
  fresh "git/bin/*"

  for file in {authors,back,commits-since,contrib,delete-branch,delete-merged-branches,delete-tag,effort,guilt,show-merged-branches,show-unmerged-branches,summary}; do
    fresh "tj/git-extras" "bin/git-${file}"
  done
fresh-options

fresh_after_build() {
  $FRESH_LOCAL/asdf/install-plugins.sh
  $FRESH_LOCAL/vim/vim-plug/plug-install.sh
}
